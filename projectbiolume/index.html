<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Project Biolume</title>
  <meta name="description" content="A secret underwater shooter from Jelly's Space." />
  <link rel="icon" href="../favicon.ico" />
  <style>
    /* Critical: prevent first-paint flash before game.css loads
      Only hide while the stage has .hide-game */
    .stage.hide-game #game,
    .stage.hide-game .hud,
    .stage.hide-game #btnStun,
    .stage.hide-game .mobile-hint {
      visibility: hidden;
      opacity: 0;
    }
  </style>

  <link rel="stylesheet" href="./game.css" />
</head>
<body>
  <div id="app">
    <header class="topbar">
      <div class="brand">
        <span class="dot"></span>
        <span class="title">PROJECT BIOLUME</span>
      </div>

      <div class="toggles">
        <button id="btnMuteMusic" class="btn small" aria-pressed="false" title="Toggle music">Music</button>
        <button id="btnMuteSfx" class="btn small" aria-pressed="false" title="Toggle SFX">SFX</button>
        <button id="btnPause" class="btn small" aria-pressed="false" title="Pause">Pause</button>
        <a class="btn small ghost" href="/" title="Back to Jelly's Space">Close</a>
      </div>
    </header>

    <main class="stage hide-game">
      <canvas id="game" width="960" height="540" aria-label="Project Biolume game canvas"></canvas>
    <!-- Stun gun: appears only when you have a charge -->
      <button id="btnStun" class="btn small primary hud-action" aria-pressed="false"
              title="Use Stun Gun" style="display:none">Stun</button>
      
    <!-- Capture Net: appears only when you have a charge -->
      <button id="btnCapture" class="btn small primary hud-action" aria-pressed="false"
              title="Use Capture Net" style="display:none">Capture</button>

      <!-- HUD overlay -->
      <div class="hud">
        <div class="hud-left">
          <div class="hud-row"><span class="label">SCORE</span><span id="hudScore" class="value">0</span></div>
          <div class="hud-row"><span class="label">WAVE</span><span id="hudWave" class="value">1</span></div>
          <div class="hud-row"><span class="label">HEAT</span><span id="hudHeat" class="value">0%</span></div>
        </div>

        <div class="hud-right">
          <div class="hud-row"><span class="label">LIVES</span><span id="hudLives" class="value">♥♥♥♥♥</span></div>
          <div class="hud-row"><span class="label">POWER</span><span id="hudPower" class="value">—</span></div>
        </div>
      </div>

      <!-- Boot overlay (first tap to enable audio) -->
      <section id="overlayBoot" class="overlay show" aria-hidden="false">
        <div class="panel">
          <h1>Project Biolume</h1>
          <p class="sub">A game made by Jelly.</p>

          <div class="menu-actions">
            <button id="btnBoot" class="btn primary">Play game</button>
          </div>

          <div class="hint">
            This game is in early alpha.
          </div>
        </div>
      </section>

      <!-- Fake loading overlay (after first click, before showing the menu + game) -->
      <section id="overlayLoading" class="overlay" aria-hidden="true">
        <div class="panel">
          <h2>Loading…</h2>
          <p class="sub">Warming up the ocean.</p>

          <div class="loader">
            <span></span><span></span><span></span>
          </div>
        </div>
      </section>

      <!-- Menu overlay (Arcade capsule) -->
      <section id="overlayMenu" class="overlay" aria-hidden="true">
        <div class="panel menu-capsule" data-menu-root>
          <!-- ambient glows -->
          <div class="menu-ambient" aria-hidden="true"></div>

          <!-- Header -->
          <div class="menu-header">
            <div class="menu-title">Project Biolume</div>
          </div>

          <!-- Pages (single overlay, multiple pages) -->
          <div class="menu-pages" data-menu-pages>

            <!-- MAIN -->
            <section class="menu-page is-active" data-page="main" aria-label="Main menu">
              <div class="menu-list">
                <button class="menu-item" data-nav="modes">Choose Mode</button>
                <button class="menu-item" data-nav="how">How to Play</button>
                <button class="menu-item" data-nav="leaderboard">Leaderboard</button>
                <button class="menu-item" data-nav="credits">Credits</button>
              </div>

              <div class="menu-footer">
                <div class="menu-note">Tip: survive, discover, flex the leaderboard.</div>
              </div>
            </section>

            <!-- CHOOSE MODE -->
            <section class="menu-page" data-page="modes" aria-label="Choose mode">
              <div class="menu-page-title">Choose Mode</div>

              <div class="menu-list">
                <button class="menu-item is-locked" disabled aria-disabled="true">
                  Arcade <span class="menu-sub">Coming Soon</span>
                </button>

                <button id="btnModeEndless" class="menu-item is-primary">
                  Endless <span class="menu-sub">Play now</span>
                </button>

                <button class="menu-item is-locked" disabled aria-disabled="true">
                  Chaos Time Trial <span class="menu-sub">Coming Soon</span>
                </button>

                <button class="menu-item is-locked" disabled aria-disabled="true">
                  Hardcore Survival <span class="menu-sub">Coming Soon</span>
                </button>
              </div>

              <div class="menu-actions-row">
                <button class="btn ghost" data-nav="main">Back</button>
              </div>
            </section>

            <!-- HOW TO PLAY -->
            <section class="menu-page" data-page="how" aria-label="How to play">
              <div class="menu-page-title">How to Play</div>

              <div class="how-grid">
                <div class="how-card">
                  <div class="how-head">Desktop</div>
                  <ul class="how-list">
                    <li><strong>↑ / ↓</strong> or <strong>W / S</strong> — Move</li>
                    <li><strong>Space</strong> or <strong>Left Click</strong> — Shoot</li>
                    <li><strong>E</strong> — Use Stun Gun</li>
                    <li><strong>Q</strong> — Capture Enemy</li>
                  </ul>
                </div>

                <div class="how-card">
                  <div class="how-head">Mobile</div>
                  <ul class="how-list">
                    <li><strong>Swipe up/down</strong> — Move & Fire</li>
                    <li><strong>Stun button</strong> — Use Stun Gun</li>
                    <li><strong>Capture button</strong> — Capture Enemy</li>
                  </ul>
                </div>
              </div>

              <div class="how-rule">
                Move your jellyfish up and down, dodge enemies and their projectiles, and survive as long as you can.
                Pick things up and experiment — the ocean rewards curiosity.
              </div>

              <div class="menu-actions-row">
                <button class="btn ghost" data-nav="main">Back</button>
              </div>
            </section>

            <!-- LEADERBOARD -->
            <section class="menu-page" data-page="leaderboard" aria-label="Leaderboard">
              <div class="menu-page-title">Leaderboard</div>

              <div class="tabs">
                <button class="tab is-active" data-lb-mode="endless" aria-pressed="true">Endless</button>
                <button class="tab is-locked" disabled aria-disabled="true">Arcade</button>
                <button class="tab is-locked" disabled aria-disabled="true">Chaos</button>
              </div>

              <div class="leaderboard">
                <ol id="scoreList" class="score-list"></ol>
              </div>

              <div class="menu-actions-row split">
                <button id="btnResetScores" class="btn danger" type="button">Reset Scores</button>
                <button class="btn ghost" data-nav="main">Back</button>
              </div>

              <div class="menu-note small">
                (Reset button is UI-only for now. Logic later.)
              </div>
            </section>

            <!-- CREDITS -->
            <section class="menu-page" data-page="credits" aria-label="Credits">
              <div class="menu-page-title-row">
                <div class="menu-page-title">Credits</div>

                <button class="credits-back-inline btn ghost small" data-nav="main" aria-label="Back to menu">
                  Back
                </button>
              </div>

              <div class="credits">
                <div class="credits-block">
                  <div class="credits-head">Game Design &amp; Code</div>
                  <div class="credits-line">Jelly</div>
                </div>

                <div class="credits-block">
                  <div class="credits-head">Enemy Profile Pics</div>
                  <div class="credits-line">All the lovely Decor Artists found on Jelly's Space Artist Page</div>
                </div>

                <div class="credits-block">
                  <div class="credits-head">Music</div>

                  <div class="credits-line">
                    <a href="https://www.youtube.com/watch?v=kZRQosq3PjM"
                      target="_blank"
                      rel="noopener noreferrer">
                      CHIPTUNE ♫ 20XX
                    </a>
                    — Context Sensitive (Main Menu)
                  </div>

                  <div class="credits-line">
                    <a href="https://www.youtube.com/watch?v=miWN-WnQDLQ"
                      target="_blank"
                      rel="noopener noreferrer">
                      a s p e c t ♫
                    </a>
                    — Context Sensitive (In-game)
                  </div>

                  <div class="credits-line">
                    <a href="https://www.youtube.com/@contextsensitive"
                      target="_blank"
                      rel="noopener noreferrer">
                      YouTube: Context Sensitive
                    </a>
                  </div>
                </div>

                <div class="credits-block">
                  <div class="credits-head">SFX &amp; Sound Design</div>
                  <div class="credits-line">Jelly</div>
                </div>

                <div class="credits-block">
                  <div class="credits-head">Playtesters</div>
                  <div class="credits-line">Jelly, Zin, Cal, DTACat</div>
                </div>

            </section>

          </div>
        </div>
      </section>

      <!-- Game Over overlay -->
      <section id="overlayOver" class="overlay" aria-hidden="true">
        <div class="panel">
          <h2>Game Over</h2>
          <p class="sub">Score: <span id="finalScore">0</span></p>

          <div class="name-row">
            <label for="playerName">Name</label>
            <input id="playerName" maxlength="16" placeholder="Jelly" autocomplete="nickname" />
          </div>

          <div class="menu-actions">
            <button id="btnSubmitScore" class="btn primary">Save score</button>
            <button id="btnRetry" class="btn">Retry</button>
            <button id="btnMenu" class="btn ghost">Main menu</button>
          </div>
        </div>
      </section>

      <!-- Mobile helper -->
      <div class="mobile-hint" id="mobileHint">
        Drag to move • Tap to shoot
      </div>
    </main>

    <footer class="footer">
      <span>Built for Jelly’s Space</span>
      <span class="sep">•</span>
      <span id="buildInfo">v1</span>
    </footer>
  </div>

  <script src="./game.js"></script>
</body>
</html>
